
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Git, GPG, and IDE - Dev and Such</title>
  <meta name="author" content="Brian Zwahr">

  
  <meta name="description" content="Today, I discovered that git allows for signing commits and tags with gpg. Awesome. However, I&rsquo;ve gotten rather used to using the git &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://echosa.github.io/blog/2016/08/18/git-gpg-ide">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dev and Such" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dev and Such</a></h1>
  
    <h2>A blog pertaining to my own development experiences.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="echosa.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/categories/php">PHP</a></li>
  <li><a href="/blog/categories/java">Java</a></li>
  <li><a href="/blog/categories/clojure">Clojure</a></li>
  <li><a href="/blog/categories/ios">iOS</a></li>
  <li><a href="/blog/categories/node-js">Node.js</a></li>
  <li><a href="/blog/categories/emacs">Emacs</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Git, GPG, and IDE</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-08-18T09:23:06-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:23 am</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://echosa.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Today, I discovered that <code>git</code> allows for signing commits and tags with <code>gpg</code>. Awesome. However, I&rsquo;ve gotten rather used to using the git integration in IntelliJ&rsquo;s IDEA IDE, which is actually quite nice. In order to get the git/gpg stuff working, though, a few tweaks were required. I&rsquo;m writing those here so I can remember them in the future.</p>

<!--more-->


<p>A quick overview of the problem and the solution. The issue is that when you tell git to sign commits or tags (either via a command line argument or git config change), gpg will require your passphrase for the key. Makes sense. If you&rsquo;re using git from the command line, there&rsquo;s no issue. However, since gpg defaults to a CLI prompt for the password, if you try to make a git commit from an external program (say, an IDE, like IntelliJ IDEA), you won&rsquo;t be prompted for a passphrase and the commit won&rsquo;t be made. The solution, then, is to get gpg to ask for the passphrase in a way compatible with external applications, beyond pure CLI usage.</p>

<p>Note: these instructions will be specific to OS X (soon to be macOS [again]).</p>

<p>Required installs (can be installed with <a href="http://brew.sh">homebrew</a>): git, gpg, pinentry-mac</p>

<ol>
<li><p>Create a new gpg key (or use an existing one), and configure git to use it. GitHub has <a href="https://help.github.com/articles/generating-a-gpg-key/">excellent documentation</a> about how to do this.</p></li>
<li><p>Tell gpg to use a GUI program, not the terminal, to ask for passphrase when signing things by adding this to <code>~/.gnupg/gpg.conf</code>:</p></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>no-tty
</span><span class='line'>use-agent</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Tell gpg-agent to use the <code>pinentry-mac</code> program by adding this to <code>~/.gnupg/gpg-agent.conf</code> (you&rsquo;ll need to create the file if it doesn&rsquo;t exist):</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pinentry-program /usr/local/bin/pinentry-mac</span></code></pre></td></tr></table></div></figure>


<p>The pinentry-mac program exactly as it sounds: a pin entry program for Macs. This is the GUI program that will replace the default CLI passphrase prompt.</p>

<ol>
<li>[Optional] If you don&rsquo;t want to have to tell git to sign every commit manually by using <code>git commit -S</code>, you can tell git to always sign. I&rsquo;ve done so globally, but you could do so on a project-by-project basis:</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git config --global commit.gpgsign true</span></code></pre></td></tr></table></div></figure>


<p>Now, whenever you commit and have git sign with gpg, you&rsquo;ll be prompted with a GUI popup instead of gpg trying to ask for a password on the command-line. Added bonus: pinentry-mac allows you to check &ldquo;Save in keychain&rdquo; so you don&rsquo;t have to put in your passphrase every single time. <em>WARNING</em> Only select this option if your computer already has other security precautions, is not used by anyone else, and is safe and secure. Otherwise, anyone with access to your computer would be able to make commits signed by your key!</p>

<p>So, there you have it. That should be all that&rsquo;s requried to get git&rsquo;s gpg signing playing nice with external programs.</p>

<p>One last thing: just so you know, GitHub now has <a href="https://github.com/blog/2144-gpg-signature-verification">built-in GPG verification</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Brian Zwahr</span></span>

      




<time class='entry-date' datetime='2016-08-18T09:23:06-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:23 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/git/'>git</a>, <a class='category' href='/blog/categories/gpg/'>gpg</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://echosa.github.io/blog/2016/08/18/git-gpg-ide/" data-via="echosa" data-counturl="http://echosa.github.io/blog/2016/08/18/git-gpg-ide/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/03/29/zork-fortress-update-0-dot-0-2/" title="Previous Post: Zork Fortress Update: 0.0.2">&laquo; Zork Fortress Update: 0.0.2</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/echosa">@echosa</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'echosa',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Brian Zwahr -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'devstuff-blog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://echosa.github.io/blog/2016/08/18/git-gpg-ide/';
        var disqus_url = 'http://echosa.github.io/blog/2016/08/18/git-gpg-ide/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
