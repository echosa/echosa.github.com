<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Git | Dev and Such]]></title>
  <link href="http://echosa.github.io/blog/categories/git/atom.xml" rel="self"/>
  <link href="http://echosa.github.io/"/>
  <updated>2016-08-18T09:53:54-05:00</updated>
  <id>http://echosa.github.io/</id>
  <author>
    <name><![CDATA[Brian Zwahr]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Git, GPG, and IDE]]></title>
    <link href="http://echosa.github.io/blog/2016/08/18/git-gpg-ide/"/>
    <updated>2016-08-18T09:23:06-05:00</updated>
    <id>http://echosa.github.io/blog/2016/08/18/git-gpg-ide</id>
    <content type="html"><![CDATA[<p>Today, I discovered that <code>git</code> allows for signing commits and tags with <code>gpg</code>. Awesome. However, I&rsquo;ve gotten rather used to using the git integration in IntelliJ&rsquo;s IDEA IDE, which is actually quite nice. In order to get the git/gpg stuff working, though, a few tweaks were required. I&rsquo;m writing those here so I can remember them in the future.</p>

<!--more-->


<p>A quick overview of the problem and the solution. The issue is that when you tell git to sign commits or tags (either via a command line argument or git config change), gpg will require your passphrase for the key. Makes sense. If you&rsquo;re using git from the command line, there&rsquo;s no issue. However, since gpg defaults to a CLI prompt for the password, if you try to make a git commit from an external program (say, an IDE, like IntelliJ IDEA), you won&rsquo;t be prompted for a passphrase and the commit won&rsquo;t be made. The solution, then, is to get gpg to ask for the passphrase in a way compatible with external applications, beyond pure CLI usage.</p>

<p>Note: these instructions will be specific to OS X (soon to be macOS [again]).</p>

<p>Required installs (can be installed with <a href="http://brew.sh">homebrew</a>): git, gpg, pinentry-mac</p>

<ol>
<li><p>Create a new gpg key (or use an existing one), and configure git to use it. GitHub has <a href="https://help.github.com/articles/generating-a-gpg-key/">excellent documentation</a> about how to do this.</p></li>
<li><p>Tell gpg to use a GUI program, not the terminal, to ask for passphrase when signing things by adding this to <code>~/.gnupg/gpg.conf</code>:</p></li>
</ol>


<pre><code>no-tty
use-agent
</code></pre>

<ol>
<li>Tell gpg-agent to use the <code>pinentry-mac</code> program by adding this to <code>~/.gnupg/gpg-agent.conf</code> (you&rsquo;ll need to create the file if it doesn&rsquo;t exist):</li>
</ol>


<pre><code>pinentry-program /usr/local/bin/pinentry-mac
</code></pre>

<p>The pinentry-mac program exactly as it sounds: a pin entry program for Macs. This is the GUI program that will replace the default CLI passphrase prompt.</p>

<ol>
<li>[Optional] If you don&rsquo;t want to have to tell git to sign every commit manually by using <code>git commit -S</code>, you can tell git to always sign. I&rsquo;ve done so globally, but you could do so on a project-by-project basis:</li>
</ol>


<pre><code>git config --global commit.gpgsign true
</code></pre>

<p>Now, whenever you commit and have git sign with gpg, you&rsquo;ll be prompted with a GUI popup instead of gpg trying to ask for a password on the command-line. Added bonus: pinentry-mac allows you to check &ldquo;Save in keychain&rdquo; so you don&rsquo;t have to put in your passphrase every single time. <em>WARNING</em> Only select this option if your computer already has other security precautions, is not used by anyone else, and is safe and secure. Otherwise, anyone with access to your computer would be able to make commits signed by your key!</p>

<p>So, there you have it. That should be all that&rsquo;s requried to get git&rsquo;s gpg signing playing nice with external programs.</p>

<p>One last thing: just so you know, GitHub now has <a href="https://github.com/blog/2144-gpg-signature-verification">built-in GPG verification</a>.</p>
]]></content>
  </entry>
  
</feed>
